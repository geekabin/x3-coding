### **开发案例之销售发票增加字段**

#### 需求列表

1. 增加描述2，描述3
2. 增加净价合计字段
3. 增加做列表金税号字段

#### 开发过程：

1. 找到明细的屏幕

2. 增加字段 (要搞清楚表字段来自哪里，像本案例，实际上XSINVOICED表实际上有描述1和描述2，那么需要描述3实际上两种方案，一种是在XSINVOICED加描述3的字段，一种是直接从商品中取，从业务场景来看，这个地方只是一个显示作用，并不需要独立保存，所以取第二种方案)

3. 给字段增加事件（这里添加的是字段前事件）

4. 编写代码

   ```
   ######################################################################################
   
   ######################################################################################
   ## 由系统管理员添加的标签 (屏幕 XSI1) 2021/06/28 16:34:05 (00208)
   ######################################################################################
   Subprog AV_ITMDES2(VALEUR)
   Variable Char    VALEUR()
   IF !CLALEV([F:ITM]) LOCAL FILE ITMMASTER [F:ITM] ENDIF
   READ [F:ITM]ITM0 = [M:XSI1]ITMREF(NOLIGN-1)
   IF !FSTAT
       VALEUR  = [F:ITM]ITMDES2
   ENDIF
   End
   
   Subprog AV_ITMDES3(VALEUR)
   Variable Char    VALEUR()
   IF !CLALEV([F:ITM]) LOCAL FILE ITMMASTER [F:ITM] ENDIF
   READ [F:ITM]ITM0 = [M:XSI1]ITMREF(NOLIGN-1)
   IF !FSTAT
       VALEUR  = [F:ITM]ITMDES3
   ENDIF
   End
   
   
   ######################################################################################
   
   ######################################################################################
   ## 由系统管理员添加的标签 (屏幕 XSI1) 2021/06/28 16:59:41 (00208)
   ######################################################################################
   Subprog AV_NETPRILIN(VALEUR)
   Variable Decimal VALEUR
     VALEUR = [M:XSI1]NETPRI(NOLIGN-1)*[M:XSI1]REQTY(NOLIGN-1)
   End
   
   
   ######################################################################################
   ```

   

5. 找到窗体 (可以从菜单找到功能代码，通过功能找到窗体，也可以直接在窗体列表搜索)

6. 找到对象

7. 增加左列表需要的字段





