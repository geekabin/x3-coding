### **开发案例之增加字段**

#### **用到的知识点**

- num$([M:ITM3]PUU)    打印非文字和数字类型时，可以用"**num$(**参数**)**"打印

- Affzo [M:ITM3]PUU      Affzo 刷新字段

- Subprog AP_XXXX(VALEUR)     

  ​	AP  代表字段后 

  ​    xxxx就是你要操作的字段

  ​	可以不用自己编写，增加操作之后，保存、审核。能自动生成



#### 需求列表

1. 产品->单位。修改存货单位，采购、销售、统计、EEC单位也要随之改变

#### 开发过程：

1. 找到“单位”的屏幕(**ITM3**)

2. 查看存货单位的字段，在屏幕内增加字段后操作

3. ![image-20210630094933844](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210630094933844.png)

4. 编写代码

   ```
   
   ######################################################################################
   ## 由系统管理员添加的标签 (屏幕 ITM3) 2021/06/29 16:52:39 (00198)
   ######################################################################################
   Subprog AP_STU(VALEUR)
   IF VALEUR() <> num$([M:ITM3]PUU)
     [M:ITM3]PUUSTUCOE = 1
     Affzo [M:ITM3]PUUSTUCOE
     [M:ITM3]PUU = VALEUR()
     Affzo [M:ITM3]PUU 
   ENDIF
   IF VALEUR() <> num$([M:ITM3]SAU)
     [M:ITM3]SAUSTUCOE = 1
     Affzo [M:ITM3]SAUSTUCOE
     [M:ITM3]SAU = VALEUR()
     Affzo [M:ITM3]SAU
   ENDIF
   IF VALEUR() <> num$([M:ITM3]SSU)
     [M:ITM3]SSUSTUCOE = 1
     Affzo [M:ITM3]SSUSTUCOE
     [M:ITM3]SSU = VALEUR()
     Affzo [M:ITM3]SSU
   ENDIF
   IF VALEUR() <> num$([M:ITM3]EEU)
     [M:ITM3]EEUSTUCOE = 1
     Affzo [M:ITM3]EEUSTUCOE
     [M:ITM3]EEU = VALEUR()
     Affzo [M:ITM3]EEU
   ENDIF
   #Variable Char    VALEUR()
   End
   
   
   ######################################################################################
   ```

   

   #### 实现效果

   ![image-20210630100359742](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20210630100359742.png)





